# Week 13

## Kernel Module and Driver

In this week, i learn about how we create a driver and kernel module, kernel module is a program that runs in ring 0 of a system and have a two function that is module_init and module_exit for handling insert and remove module, ring 0 is a kernel space.  Driver is a kernel module that act like a bridge between application in user space and the hardware. Program in ring 0 only use kernel space memory because sometimes in the user space memory many unauthorized application do weird things. Each device in linux system has two numbers to identify them. The numbers are major number and minor number.  Major number is used to identify the device driver. Minor number is used to identify the specific device. A driver always has 4 basic function that is open(), read(), write(), close(). All of those function do the thing like its name. An application will open the device (that represented using a file in linux system) if it wants to use the device. If we create a new driver we must register our device type to certain Major number after that we need to register our device to the system with minor number. The system will make a file that represent the specific device.

There is 3 kind of device in linux, there are block, character, and network. The character devices is a device that doesn't have a buffer, block device is  a device that has a cache in the hardware, network device is a device that used to communicate to another machine or network device.

A kernel module must be inserted first if we want to execute the program, the insert command is `insmod` and the system will call module_init function in the program, the command is for root user only. If we want to remove the module, we use `rmmod` command and the system will call module_exit function in the program. All of the module log is written to a special kernel space, we can see it using `dmesg` command.  